# **Prompt 02: Pre-flight Test for Subscriber Service**

**Objective:** Generate the pre-flight unit test for the `tracer-subscriber` test data service. This test validates the service's ability to correctly load its configuration from an embedded YAML file.

**TDD Phase:** Red

## **Primary Prompt (Concise)**

Your task is to generate the Go code for the `testdata/tracer-subscriber/main_test.go` file.

Write a unit test for the subscriber's `loadAndValidateConfig` function. The test must simulate the pre-flight check by creating a dummy `resources.yaml`, setting environment variables, and then asserting that the configuration is loaded correctly.

## **Reinforcement Prompt (Detailed Context)**

**Your Specific Task:** Generate the complete code for `testdata/tracer-subscriber/main_test.go`.

**Key Requirements to Fulfill:**

* **Package:** The test file must be in the `main` package.
* **Test `loadAndValidateConfig`:** The test must:
    1.  Programmatically create dummy content for `resources.yaml`. This content must include a `SubscriptionConfig` linked to this service via `ConsumerService` and a `TopicConfig` that the service will publish to for verification purposes.
    2.  Set the required `PROJECT_ID` environment variable using `t.Setenv`.
    3.  Call the (not-yet-existing) `loadAndValidateConfig` function from `main.go`.
    4.  Assert that the returned config struct is correctly populated with the `SubscriptionID`, `VerifyTopicID`, and `ProjectID`.

**Dependencies (Full source code to be provided):**

1.  `testdata/tracer-subscriber/main.go` (the file to be generated by the Green prompt)
2.  `servicemanager/systemarchitecture.go`
3.  `orchestration/configgenerator.go` (for `ReadResourceMappings` helper)

---

## Prompt Changelog

### RV_20250901

This is the initial version of the prompt for the `tracer-subscriber` service's pre-flight test.